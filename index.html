<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Dada Makanlal in MCU Campus</title>
<style>
  /* Global styles omitted for brevity - keep your previous styles */

  /* Fullscreen Mode */
  .viewer-modal.fullscreen-mode {
    padding: 0;
  }

  .viewer-modal.fullscreen-mode .viewer-content {
    grid-template-columns: 1fr;
    gap: 0;
    max-width: none;
    padding: 0;
  }

  /* Hide entire sidebar in fullscreen */
  .viewer-modal.fullscreen-mode .viewer-sidebar {
    display: none;
  }

  /* Remove padding, border radius of viewer main in fullscreen */
  .viewer-modal.fullscreen-mode .viewer-main {
    border-radius: 0;
    padding: 0;
    height: 100vh;
    border: none;
  }

  /* Model viewer takes full height in fullscreen */
  .viewer-modal.fullscreen-mode #modelViewer {
    border-radius: 0;
    min-height: 100vh;
  }

  /* Controls styling */
  .viewer-controls {
    position: absolute;
    top: 30px;
    right: 30px;
    display: flex;
    gap: 15px;
    z-index: 1000;
  }

  /* Other styles here... */
</style>
<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>🏛️ Dada Makanlal in MCU Campus</h1>
      <p>Advanced 3D Model Visualization Platform</p>
    </header>

    <section class="models-section">
      <h2 class="section-title">Interactive Models</h2>
      <p class="section-subtitle">Explore our comprehensive collection of interactive 3D models. Click to view models in detail or share them with others.</p>
      <div class="model-grid" id="modelGrid"></div>
    </section>

    <div class="watermark"><p>✨ <span class="designer">Design in VC Office. MCNUJC Bhopal</span> ✨</p></div>
  </div>

  <!-- Viewer Modal -->
  <div class="viewer-modal" id="viewerModal">
    <div class="viewer-content">
      <div class="viewer-main">
        <div class="viewer-controls">
          <button class="control-btn" id="fullscreenBtn" title="Fullscreen">⛶</button>
          <button class="control-btn" onclick="closeViewer()" title="Close">✕</button>
        </div>
        <model-viewer
          id="modelViewer"
          camera-controls
          touch-action="pan-y"
          auto-rotate
          auto-rotate-delay="3000"
          rotation-per-second="30deg"
          shadow-intensity="1"
          environment-image="https://modelviewer.dev/shared-assets/environments/aircraft_workshop_01_1k.hdr"
        ></model-viewer>
      </div>

      <div class="viewer-sidebar">
        <div class="sidebar-section">
          <h3>🎮 3D Viewport</h3>
          <div class="camera-controls">
            <button class="camera-btn" onclick="setCameraView('front')">📱 Front</button>
            <button class="camera-btn" onclick="setCameraView('back')">📱 Back</button>
            <button class="camera-btn" onclick="setCameraView('left')">📱 Left</button>
            <button class="camera-btn" onclick="setCameraView('right')">📱 Right</button>
            <button class="camera-btn" onclick="setCameraView('top')">📱 Top</button>
            <button class="camera-btn" onclick="resetCamera()">🎯 Reset</button>
          </div>
        </div>

        <div class="sidebar-section">
          <h3>🎨 Background</h3>
          <div class="bg-controls">
            <div class="bg-option bg-gray active" onclick="changeBackground('gray')" title="Gray"></div>
            <div class="bg-option bg-blue" onclick="changeBackground('blue')" title="Blue"></div>
            <div class="bg-option bg-green" onclick="changeBackground('green')" title="Green"></div>
            <div class="bg-option bg-orange" onclick="changeBackground('orange')" title="Orange"></div>
            <div class="bg-option bg-dark" onclick="changeBackground('dark')" title="Dark"></div>
            <div class="bg-option bg-white" onclick="changeBackground('white')" title="White"></div>
          </div>
        </div>

        <div class="sidebar-section">
          <h3>📋 About This Model</h3>
          <div id="aboutContent"><p>Select a model to view details</p></div>
        </div>

        <div class="sidebar-section">
          <h3>📤 Share Model</h3>
          <div class="share-section">
            <div class="qr-code">
              <canvas id="qrCanvas" style="display: none;"></canvas>
            </div>
            <input type="text" id="shareLink" class="share-link" placeholder="Model link..." readonly />
            <button class="btn btn-primary" onclick="copyLink()" id="copyBtn">📋 Copy Link</button>
            <button class="btn btn-outline" onclick="generateQR()" id="qrBtn">📱 Generate QR</button>
          </div>
        </div>

        <div class="sidebar-section">
          <h3>🎮 Interactive Features</h3>
          <div class="interactive-guide">
            <ul>
              <li><span class="icon">🖱️</span><strong>Rotate:</strong> Drag with mouse or swipe on touch devices</li>
              <li><span class="icon">🔍</span><strong>Zoom:</strong> Use scroll wheel or pinch gestures</li>
              <li><span class="icon">📱</span><strong>Pan:</strong> Right-click and drag to move around</li>
              <li><span class="icon">🎯</span><strong>Reset:</strong> Use reset button to return to default view</li>
              <li><span class="icon">⛶</span><strong>Fullscreen:</strong> Click fullscreen for immersive viewing</li>
              <li><span class="icon">🎨</span><strong>Background:</strong> Change colors and gradients</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const models = [
      {
        name: "Makanlal ji 1",
        file: "models/makanlal1.glb",
        description:
          "Interactive 3D model showcasing the architectural details and historical significance of Dada Makanlal's first monument.",
      },
      {
        name: "Makanlal ji 2",
        file: "models/makanlal2.glb",
        description:
          "Detailed exploration of cultural elements and artistic craftsmanship representing Dada Makanlal's legacy.",
      },
      {
        name: "Makanlal ji 3",
        file: "models/makanlal3.glb",
        description:
          "Comprehensive view of architectural innovations and design principles from Dada Makanlal's era.",
      },
    ];

    let currentModel = null;
    let isFullscreen = false;

    function loadModelGrid() {
      const grid = document.getElementById("modelGrid");
      grid.innerHTML = "";

      models.forEach((model, index) => {
        const card = document.createElement("div");
        card.className = "model-card";
        card.innerHTML = `
                    <div class="model-preview">
                        <model-viewer
                            src="${model.file}"
                            auto-rotate
                            camera-controls
                            disable-zoom
                            disable-pan
                            rotation-per-second="90deg"
                            loading="lazy"
                        ></model-viewer>
                    </div>
                    <div class="model-info">
                        <h3 class="model-name">${model.name}</h3>
                        <p class="model-description">${model.description}</p>
                    </div>
                    <div class="model-actions">
                        <button class="btn btn-primary" onclick="viewModel(${index})">
                            👁️ View Model
                        </button>
                        <button class="btn btn-outline" onclick="shareModel(${index})">
                            <div class="qr-icon">⚡</div>
                        </button>
                    </div>
                `;
        grid.appendChild(card);
      });
    }

    function viewModel(index) {
      currentModel = models[index];
      const viewer = document.getElementById("modelViewer");
      const modal = document.getElementById("viewerModal");
      const aboutContent = document.getElementById("aboutContent");

      viewer.src = currentModel.file;
      modal.style.display = "block";
      document.body.style.overflow = "hidden";

      // Update about section
      aboutContent.innerHTML = `
                <p><strong>📁 Name:</strong> ${currentModel.name}</p>
                <p><strong>📅 Collection:</strong> Dada Makanlal MCU Campus</p>
                <p><strong>🎯 Description:</strong> ${currentModel.description}</p>
            `;

      // Update share link
      const shareUrl = `${window.location.origin}${window.location.pathname}?model=${index}`;
      document.getElementById("shareLink").value = shareUrl;
    }

    function closeViewer() {
      const modal = document.getElementById("viewerModal");
      modal.style.display = "none";
      modal.classList.remove("fullscreen-mode");
      document.body.style.overflow = "auto";
      currentModel = null;
      isFullscreen = false;
      document.getElementById("fullscreenBtn").textContent = "⛶";
    }

    function shareModel(index) {
      const shareUrl = `${window.location.origin}${window.location.pathname}?model=${index}`;

      // Copy to clipboard
      if (navigator.clipboard) {
        navigator.clipboard.writeText(shareUrl).then(() => {
          alert("Model link copied to clipboard!");
        });
      } else {
        // Fallback for older browsers
        const textArea = document.createElement("textarea");
        textArea.value = shareUrl;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand("copy");
        document.body.removeChild(textArea);
        alert("Model link copied to clipboard!");
      }
    }

    function setCameraView(view) {
      const viewer = document.getElementById("modelViewer");
      const positions = {
        front: "0deg 75deg 4m",
        back: "180deg 75deg 4m",
        left: "-90deg 75deg 4m",
        right: "90deg 75deg 4m",
        top: "0deg 0deg 4m",
      };

      if (positions[view]) {
        viewer.cameraOrbit = positions[view];
      }
    }

    function resetCamera() {
      const viewer = document.getElementById("modelViewer");
      viewer.cameraOrbit = "0deg 75deg 4m";
      viewer.fieldOfView = "45deg";
    }

    function changeBackground(type) {
      document.querySelectorAll(".bg-option").forEach((opt) => {
        opt.classList.remove("active");
      });

      document.querySelector(`.bg-${type}`).classList.add("active");

      const backgrounds = {
        gray: "radial-gradient(ellipse at top, rgba(120, 119, 198, 0.4) 0%, transparent 70%), radial-gradient(ellipse at bottom left, rgba(255, 119, 198, 0.3) 0%, transparent 60%), radial-gradient(ellipse at bottom right, rgba(120, 219, 255, 0.3) 0%, transparent 60%), linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",
        blue: "radial-gradient(ellipse at top, rgba(120, 119, 198, 0.4) 0%, transparent 70%), radial-gradient(ellipse at bottom left, rgba(255, 119, 198, 0.3) 0%, transparent 60%), radial-gradient(ellipse at bottom right, rgba(120, 219, 255, 0.3) 0%, transparent 60%), linear-gradient(135deg, #667eea 0%, #764ba2 30%, #f093fb 70%, #667eea 100%)",
        green: "radial-gradient(ellipse at top, rgba(17, 153, 142, 0.5) 0%, transparent 70%), radial-gradient(ellipse at bottom left, rgba(56, 239, 125, 0.4) 0%, transparent 60%), linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",
        orange: "radial-gradient(ellipse at top, rgba(240, 147, 251, 0.5) 0%, transparent 70%), radial-gradient(ellipse at bottom left, rgba(245, 87, 108, 0.4) 0%, transparent 60%), linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",
        dark: "radial-gradient(ellipse at top, rgba(44, 62, 80, 0.5) 0%, transparent 70%), radial-gradient(ellipse at bottom left, rgba(52, 73, 94, 0.4) 0%, transparent 60%), linear-gradient(135deg, #2c3e50 0%, #34495e 100%)",
        white: "#ffffff",
      };
      document.body.style.background = backgrounds[type];
    }

    function toggleFullscreen() {
      const modal = document.getElementById("viewerModal");
      const btn = document.getElementById("fullscreenBtn");

      if (!isFullscreen) {
        // Enter fullscreen mode
        modal.classList.add("fullscreen-mode");
        btn.textContent = "⛳";
        isFullscreen = true;

        // Try browser fullscreen API
        if (modal.requestFullscreen) {
          modal.requestFullscreen().catch(() => {});
        } else if (modal.webkitRequestFullscreen) {
          modal.webkitRequestFullscreen();
        } else if (modal.msRequestFullscreen) {
          modal.msRequestFullscreen();
        }
      } else {
        // Exit fullscreen mode
        modal.classList.remove("fullscreen-mode");
        btn.textContent = "⛶";
        isFullscreen = false;

        // Exit browser fullscreen
        if (document.exitFullscreen) {
          document.exitFullscreen().catch(() => {});
        } else if (document.webkitExitFullscreen) {
          document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) {
          document.msExitFullscreen();
        }
      }
    }

    // Copy share link to clipboard
    function copyLink() {
      const linkInput = document.getElementById("shareLink");
      linkInput.select();
      document.execCommand("copy");

      const btn = document.getElementById("copyBtn");
      const originalText = btn.textContent;
      btn.textContent = "✅ Copied!";
      btn.style.background = "#28a745";

      setTimeout(() => {
        btn.textContent = originalText;
        btn.style.background = "";
      }, 2000);
    }

    // Generate QR code for sharing link
    function generateQR() {
      const canvas = document.getElementById("qrCanvas");
      const link = document.getElementById("shareLink").value;

      if (link) {
        QRCode.toCanvas(
          canvas,
          link,
          {
            width: 200,
            margin: 2,
            color: { dark: "#000000", light: "#FFFFFF" },
          },
          function (error) {
            if (error) {
              console.error(error);
            } else {
              canvas.style.display = "block";
            }
          }
        );
      }
    }

    // Load model gallery grid
    function loadModelGrid() {
      const grid = document.getElementById("modelGrid");
      grid.innerHTML = "";

      models.forEach((model, index) => {
        const card = document.createElement("div");
        card.className = "model-card";
        card.innerHTML = `
                    <div class="model-preview">
                        <model-viewer
                            src="${model.file}"
                            auto-rotate
                            camera-controls
                            disable-zoom
                            disable-pan
                            rotation-per-second="90deg"
                            loading="lazy"
                        ></model-viewer>
                    </div>
                    <div class="model-info">
                        <h3 class="model-name">${model.name}</h3>
                        <p class="model-description">${model.description}</p>
                    </div>
                    <div class="model-actions">
                        <button class="btn btn-primary" onclick="viewModel(${index})">
                            👁️ View Model
                        </button>
                        <button class="btn btn-outline" onclick="shareModel(${index})">
                            <div class="qr-icon">⚡</div>
                        </button>
                    </div>
                `;
        grid.appendChild(card);
      });
    }

    // View model in modal
    function viewModel(index) {
      currentModel = models[index];
      const viewer = document.getElementById("modelViewer");
      const modal = document.getElementById("viewerModal");
      const aboutContent = document.getElementById("aboutContent");

      viewer.src = currentModel.file;
      modal.style.display = "block";
      document.body.style.overflow = "hidden";

      // Update about section unless fullscreen mode
      if (!modal.classList.contains("fullscreen-mode")) {
        aboutContent.innerHTML = `
                <p><strong>📁 Name:</strong> ${currentModel.name}</p>
                <p><strong>📅 Collection:</strong> Dada Makanlal MCU Campus</p>
                <p><strong>🎯 Description:</strong> ${currentModel.description}</p>
            `;
      } else {
        aboutContent.innerHTML = '';
      }

      // Update share link
      const shareUrl = `${window.location.origin}${window.location.pathname}?model=${index}`;
      document.getElementById("shareLink").value = shareUrl;
    }

    // Close the modal (exit fullscreen if enabled as well)
    function closeViewer() {
      const modal = document.getElementById("viewerModal");
      modal.style.display = "none";
      modal.classList.remove("fullscreen-mode");
      document.body.style.overflow = "auto";
      currentModel = null;
      isFullscreen = false;
      document.getElementById("fullscreenBtn").textContent = "⛶";
    }

    // Share model function
    function shareModel(index) {
      const shareUrl = `${window.location.origin}${window.location.pathname}?model=${index}`;

      if (navigator.clipboard) {
        navigator.clipboard.writeText(shareUrl).then(() => {
          alert("Model link copied to clipboard!");
        });
      } else {
        const textArea = document.createElement("textarea");
        textArea.value = shareUrl;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand("copy");
        document.body.removeChild(textArea);
        alert("Model link copied to clipboard!");
      }
    }

    // Additional controls
    function setCameraView(view) {
      const viewer = document.getElementById("modelViewer");
      const positions = {
        front: "0deg 75deg 4m",
        back: "180deg 75deg 4m",
        left: "-90deg 75deg 4m",
        right: "90deg 75deg 4m",
        top: "0deg 0deg 4m",
      };

      if (positions[view]) {
        viewer.cameraOrbit = positions[view];
      }
    }

    function resetCamera() {
      const viewer = document.getElementById("modelViewer");
      viewer.cameraOrbit = "0deg 75deg 4m";
      viewer.fieldOfView = "45deg";
    }

    // Change background (kept for desktop, hidden on mobile)
    function changeBackground(type) {
      document.querySelectorAll(".bg-option").forEach((opt) => {
        opt.classList.remove("active");
      });

      document.querySelector(`.bg-${type}`).classList.add("active");

      const backgrounds = {
        gray: "radial-gradient(ellipse at top, rgba(120, 119, 198, 0.4) 0%, transparent 70%), radial-gradient(ellipse at bottom left, rgba(255, 119, 198, 0.3) 0%, transparent 60%), radial-gradient(ellipse at bottom right, rgba(120, 219, 255, 0.3) 0%, transparent 60%), linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",
        blue: "radial-gradient(ellipse at top, rgba(120, 119, 198, 0.4) 0%, transparent 70%), radial-gradient(ellipse at bottom left, rgba(255, 119, 198, 0.3) 0%, transparent 60%), radial-gradient(ellipse at bottom right, rgba(120, 219, 255, 0.3) 0%, transparent 60%), linear-gradient(135deg, #667eea 0%, #764ba2 30%, #f093fb 70%, #667eea 100%)",
        green: "radial-gradient(ellipse at top, rgba(17, 153, 142, 0.5) 0%, transparent 70%), radial-gradient(ellipse at bottom left, rgba(56, 239, 125, 0.4) 0%, transparent 60%), linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",
        orange: "radial-gradient(ellipse at top, rgba(240, 147, 251, 0.5) 0%, transparent 70%), radial-gradient(ellipse at bottom left, rgba(245, 87, 108, 0.4) 0%, transparent 60%), linear-grad